<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">
    <head>
        <title>View Resep</title>
        <object th:include="fragments/fragment :: css" th:remove="tag"></object>
        <object th:include="fragments/fragment :: js" th:remove="tag"></object>
    </head>
    <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand font-weight-bold text-success" href="#"
        >HaiDokter!</a>
        <button
                class="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#navbarNavAltMarkup"
                aria-controls="navbarNavAltMarkup"
                aria-expanded="false"
                aria-label="Toggle navigation"
        >
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
                <a class="nav-item nav-link active text-secondary" th:href="@{/}">
                    Home<span class="sr-only">(current)</span>
                </a>
            </ul>
        </div>
    </nav>
    <section>
        <h2>Informasi Resep</h2>
        <h3 th:text="'Nomor Resep: ' + ${resep.noResep}"></h3>
        <h3 th:text="'Nama Dokter: ' + ${resep.namaDokter}"></h3>
        <h3 th:text="'Nama Pasien: ' + ${resep.namaPasien}"></h3>
        <h3 th:text="'Catatan: ' + ${resep.catatan}"></h3>

        <td><a th:href="@{/resep/change/} + ${resep.noResep}">Change Resep</a></td>
        <td><a th:href="@{/resep/delete/} + ${resep.noResep}">Delete Resep</a><td>
    </section>
    <td><h4 th:if="${listObat.isEmpty()}">Resep belum memiliki daftar obat</h4></td>
    <section>
        <h2 th:text="${title}"></h2>
        <!--<div th:each="obat : ${listObat}">
            <h3 th:text="'ID Obat: ' + ${obat.id}"></h3>
            <h3 th:text="'Nama: ' + ${obat.nama}"></h3>

            <h3 th:if="${obat.bentuk == 0}">Bentuk: Tablet</h3>
            <h3 th:if="${obat.bentuk == 1}">Bentuk: Kapsul</h3>
            <h3 th:if="${obat.bentuk == 2}">Bentuk: Sirup</h3>

            <h3 th:text="'Kuantitas: ' + ${obat.kuantitas}"></h3>

            <a th:href="@{/obat/change/} + ${obat.id}">Change Obat</a>
            <a th:href="@{/obat/delete/} + ${obat.id}">Delete Obat</a>
        </div> -->
        <table>
            <thead>
                <tr>
                    <th>No</th>
                    <th>ID Obat</th>
                    <th>Nama</th>
                    <th>Bentuk</th>
                    <th>Kuantitas</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody>
                <tr
                        th:each="obat, iterationStatus : ${listObat}"
                        th:style="${iterationStatus.even} ? 'font-weight:bold;'"
                >
                    <td th:text="${iterationStatus.count}"></td>
                    <td th:text="${obat.id}"></td>
                    <td th:text="${obat.nama}"></td>
                    <td th:if="${obat.bentuk == 0}">Tablet</td>
                    <td th:if="${obat.bentuk == 1}">Kapsul</td>
                    <td th:if="${obat.bentuk == 2}">Sirup</td>
                    <td th:text="${obat.kuantitas}"></td>
                    <td
                        th:text="${obat.kuantitas < 5 ? 'Stok hampir habis' : 'Stok masih banyak'}"
                    ></td>
                    <td>
                        <a th:href="@{/obat/change/} + ${obat.id}">Change Obat</a>
                        <a th:href="@{/obat/delete/} + ${obat.id}">Delete Obat</a>
                    </td>
                </tr>
            </tbody>
        </table>
        <br><br>
        <td><a th:href="@{/obat/add/} + ${resep.noResep}">Add Obat</a></td>
    </section>
    </body>
</html>